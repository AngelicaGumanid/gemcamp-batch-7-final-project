<%= stylesheet_link_tag "table", "data-turbo-track": "reload" %>

<h1>Offers</h1>

<%= link_to 'Create New Offer', new_admins_offer_path, class: 'btn btn-success mb-3' %>

<%= form_with(url: admins_offers_path, method: :get, local: true) do %>
  <div class="form-group">
    <%= label_tag :status, 'Status' %>
    <%= select_tag :status, options_for_select(Offer.statuses.keys.map { |status| [status.titleize, status] }, params[:status]), prompt: 'Select Status', class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= label_tag :search, 'Search by Offer Name' %>
    <%= text_field_tag :search, params[:search], placeholder: 'Search by Offer Name', class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= submit_tag 'Search', class: 'btn btn-primary' %>
  </div>

  <%= link_to 'Clear Filter', admins_offers_path, class: 'btn btn-success mb-3' %>
<% end %>

<table class="table table-striped mt-4">
  <thead>
  <tr>
    <th>Image</th>
    <th>Name</th>
    <th>Status</th>
    <th>Amount</th>
    <th>Coin</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <% @offers.each do |offer| %>
    <tr>
      <td><%= image_tag(offer.image.url, size: "100x100") if offer.image.present? %></td>
      <td><%= offer.name %></td>
      <td><%= offer.status.titleize %></td>
      <td><%= offer.amount %></td>
      <td><%= offer.coin %></td>
      <td>
        <%= link_to 'Show', admins_offer_path(offer) %> |
        <%= link_to 'Edit', edit_admins_offer_path(offer) %> |
        <%= button_to 'Delete', admins_offer_path(offer), method: :delete, data: { confirm: 'Are you sure?' } %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @offers %>
